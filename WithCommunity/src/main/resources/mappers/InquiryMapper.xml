<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.with.community.dao.InquiryDAO">

	<!-- 글 목록 -->
	<select id="selectInquiryList" resultType="InquiryVO" parameterType="InquiryVO">
	select 
		inq_no
	   ,inq_title
	   ,inq_content
	   ,inq_name
	   ,inq_regdate
	from tbl_inquiry
	</select>

	<!-- 게시글 조회 -->
	<select id="selectInquiryDetail" parameterType="int" resultType="InquiryVO">
		select
		 *
		from 
		 tbl_inquiry
		where inq_no = #{inq_no}
	</select>
	
	<!-- 프로필 나의 문의 개수 -->
	<select id="selectInqCnt" parameterType="InquiryVO" resultType="InquiryVO">
		select count(1) as inqCount
			from tbl_inquiry ti left join tbl_member tm
		on ti.inq_name = tm.me_name
			where ti.inq_name = #{inq_name}
	</select>
	
	<!-- 글쓰기 -->
	<insert id="insertInquiry">
	insert into tbl_inquiry
	(
	   inq_no
	  ,inq_title
	  ,inq_content
	  ,inq_name
	  ,inq_regdate
	) values
	(
	   #{inq_no}
	  ,#{inq_title}
	  ,#{inq_content}
	  ,#{inq_name}
	  ,now()
	)
	</insert>
</mapper>